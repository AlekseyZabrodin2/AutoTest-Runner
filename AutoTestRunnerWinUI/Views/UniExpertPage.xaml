<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="AutoTestRunnerWinUI.Views.UniExpertPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:convert="using:AutoTestRunnerWinUI.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:AutoTestRunnerWinUI.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:AutoTestRunnerWinUI.Models"
    xmlns:table="using:WinUI.TableView"
    xmlns:viewmodels="using:AutoTestRunnerWinUI.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:AutoTestsViewModel}"
    mc:Ignorable="d">

    <Page.Resources>
        <!--<Style x:Key="ListBoxItemStyle" TargetType="ListBoxItem">
            <Style.Resources>
        -->
        <!--  Ресурс для установки прозрачного цвета при выделении  -->
        <!--
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black" />
            </Style.Resources>
        </Style>-->
        <convert:ResultStatusToColorConverter x:Key="ResultStatusToColorConverter" />
        <convert:AlternationBackgroundConverter x:Key="AlternationBackgroundConverter" />
        <convert:MultiValueConverter x:Key="MultiValueConverter" />
        <convert:AlternatingRowColorConverter x:Key="AlternatingRowColorConverter" />
        <convert:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />


        <!--  DataTemplate for Test Suite  -->
        <DataTemplate x:Key="TestSuiteTemplate" x:DataType="models:TestSuiteModel">
            <TreeViewItem>
                <StackPanel Orientation="Horizontal">
                    <CheckBox Content="{Binding TestClassNameModel}" IsChecked="{Binding TestSuiteIsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
                <TreeViewItem.ItemsSource>
                    <Binding Path="TestMethodsModel" />
                </TreeViewItem.ItemsSource>
            </TreeViewItem>
        </DataTemplate>

        <!--  DataTemplate for Test Method  -->
        <DataTemplate x:Key="TestMethodTemplate" x:DataType="models:TestMethodModel">
            <TreeViewItem>
                <StackPanel Orientation="Horizontal">
                    <CheckBox Content="{Binding TestMethodName}" IsChecked="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
            </TreeViewItem>
        </DataTemplate>


        <models:TestTemplateSelector
            x:Key="TreeViewTemplateSelector"
            TestMethodTemplate="{StaticResource TestMethodTemplate}"
            TestSuiteTemplate="{StaticResource TestSuiteTemplate}" />

    </Page.Resources>

    <Grid>
        <Border
            Margin="5"
            BorderBrush="Black"
            BorderThickness="0"
            CornerRadius="1">
            <!--<Border.Effect>
                <BlurEffect Radius="{Binding BlurEffectRadius}" />
            </Border.Effect>-->

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <controls:DockPanel
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="2">

                    <Grid Height="235">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="160" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock
                            Grid.Row="0"
                            Margin="10"
                            HorizontalAlignment="Center"
                            FontSize="16"
                            FontWeight="Bold"
                            HorizontalTextAlignment="Center"
                            Text="Run statistics" />

                        <Grid Grid.Row="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <Grid
                                Grid.Row="1"
                                Grid.Column="0"
                                Margin="30,10"
                                RowSpacing="15">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="190" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>


                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Text="Total count of tests: " />
                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    VerticalAlignment="Center"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding TestsCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Text="Count of selected tests: " />
                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    VerticalAlignment="Center"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding SelectedTestsCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Text="Count of all runs: " />
                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    VerticalAlignment="Center"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding CurentSelectedCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                <TextBlock
                                    Grid.Row="3"
                                    Grid.Column="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Text="Count of completed tests: " />
                                <TextBlock
                                    Grid.Row="3"
                                    Grid.Column="1"
                                    VerticalAlignment="Center"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding CompletedTestsCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            </Grid>

                            <Grid
                                Grid.Row="1"
                                Grid.Column="1"
                                Margin="30,10"
                                RowSpacing="14">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Text="Start running time:" />
                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding StringTimeStartTests}" />

                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Text="Total time:" />
                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding TotalTimeString, UpdateSourceTrigger=PropertyChanged}" />

                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Text="End running time:" />
                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    FontSize="16"
                                    FontWeight="SemiBold"
                                    Text="{Binding StringTimeStopTests}" />

                                <controls:DockPanel
                                    Grid.Row="3"
                                    Grid.Column="1"
                                    Grid.ColumnSpan="3"
                                    HorizontalSpacing="5">
                                    <TextBlock
                                        FontSize="16"
                                        FontWeight="Bold"
                                        Text="Result - ["
                                        Visibility="{Binding VisibilityResult}" />
                                    <TextBlock
                                        FontSize="16"
                                        FontWeight="SemiBold"
                                        Foreground="Green"
                                        Text="{Binding DisplaySelectedPassStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        Visibility="{Binding VisibilityPassedResult}" />

                                    <TextBlock
                                        FontSize="16"
                                        FontWeight="SemiBold"
                                        Foreground="Red"
                                        Text="{Binding DisplaySelectedFailedStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        Visibility="{Binding VisibilityFailedResult}" />

                                    <TextBlock
                                        FontSize="16"
                                        FontWeight="SemiBold"
                                        Foreground="Orange"
                                        Text="{Binding DisplaySelectedSkippedStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        Visibility="{Binding VisibilitySkippedResult}" />

                                    <TextBlock
                                        FontSize="16"
                                        FontWeight="Bold"
                                        Text="]"
                                        Visibility="{Binding VisibilityResult}" />

                                </controls:DockPanel>

                                <Button
                                    Grid.Row="3"
                                    Grid.Column="0"
                                    Command="{Binding OpenResultReportCommand}"
                                    Content="Open Report"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    Visibility="{Binding VisibilityReportButton}" />

                            </Grid>
                        </Grid>
                        <Border
                            Grid.Row="2"
                            Margin="-4"
                            BorderBrush="{StaticResource AccentControlElevationBorderBrush}"
                            BorderThickness="1"
                            IsHitTestVisible="{Binding IsTestsWindowEnabled}"
                            Opacity="{Binding BlurEffectRadius}">
                            <Grid Background="{StaticResource TabViewSelectedItemBorderBrush}">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="45" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="495" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <TextBlock
                                    Grid.Column="0"
                                    Margin="10,0,0,10"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Text="Test Methods:" />
                                <CheckBox
                                    Grid.Column="1"
                                    Margin="10,0,0,10"
                                    VerticalAlignment="Center"
                                    Content="(select all Tests Suites)"
                                    IsChecked="{Binding SelectAll, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                <TextBox
                                    Grid.Column="2"
                                    Height="30"
                                    Margin="15,3,0,0"
                                    VerticalAlignment="Top"
                                    Text="{Binding RetrySelectedCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    TextAlignment="Center" />
                                <TextBlock
                                    Grid.Column="4"
                                    Margin="10,0,0,10"
                                    VerticalAlignment="Center"
                                    Text="(number of runs for all Tests)" />

                            </Grid>
                        </Border>
                    </Grid>
                </controls:DockPanel>

                <Border
                    Grid.Row="1"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    BorderBrush="Red"
                    BorderThickness="0"
                    IsHitTestVisible="{Binding IsTestsWindowEnabled}"
                    Opacity="{Binding BlurEffectRadius}">

                    <Grid>
                        <!--<Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="495" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Grid.Column="0"
                                Margin="10,0"
                                VerticalAlignment="Center"
                                FontWeight="Bold"
                                Text="Test Methods:" />
                            <CheckBox
                                Grid.Column="1"
                                VerticalAlignment="Center"
                                Content="(select all Tests Suites)"
                                IsChecked="{Binding SelectAll, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                            <TextBox
                                Grid.Column="2"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Center" />
                            <TextBlock
                                Grid.Column="4"
                                Margin="10,0"
                                VerticalAlignment="Center"
                                Text="(number of runs for all Tests)" />

                        </Grid>-->


                        <table:TableView
                            x:Name="tableView"
                            Grid.Row="1"
                            Margin="1,1,1,10"
                            AutoGenerateColumns="False"
                            CanFilterColumns="True"
                            ItemsSource="{Binding ObservedTestSuiteModel, Mode=OneWay}"
                            RowHeight="5"
                            SelectionMode="Extended"
                            ShowExportOptions="True"
                            ShowOptionsButton="True">
                            <table:TableView.Resources>
                                <Style TargetType="table:TableViewRow">
                                    <Setter Property="Margin" Value="0,-4" />
                                    <!--  Промежуток между строками  -->
                                </Style>
                            </table:TableView.Resources>

                            <table:TableView.Columns>

                                <table:TableViewTextColumn
                                    Width="10"
                                    MinWidth="20"
                                    MaxWidth="20"
                                    Binding="{Binding TestClassNameModel}"
                                    IsReadOnly="True" />

                                <table:TableViewTemplateColumn Width="*" Header="Test Suites:">
                                    <table:TableViewTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Expander
                                                MinWidth="1160"
                                                Margin="2"
                                                BorderThickness="0"
                                                ExpandDirection="Down"
                                                IsExpanded="{Binding GroupIsExpanded, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                UseLayoutRounding="False">
                                                <Expander.Header>

                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="50" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="550" />
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>

                                                        <CheckBox
                                                            Grid.Column="0"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Center"
                                                            Command="{Binding SelectTestMethodCommand}"
                                                            Content="{Binding DisplayTestNameAndCounts}"
                                                            IsChecked="{Binding TestSuiteIsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                                        <TextBox
                                                            Grid.Column="1"
                                                            Width="10"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Center"
                                                            Text="{Binding RetryTestSuiteCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                            TextAlignment="Center" />

                                                        <StackPanel
                                                            Grid.Column="2"
                                                            Margin="15"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Center"
                                                            Orientation="Horizontal"
                                                            Spacing="5">

                                                            <TextBlock
                                                                FontWeight="Bold"
                                                                Text="Result  - ["
                                                                Visibility="{Binding VisibilityTestResult}" />
                                                            <TextBlock
                                                                x:Name="PassedStatus"
                                                                FontWeight="Bold"
                                                                Foreground="Green"
                                                                Text="{Binding DisplayPassStatusTest}"
                                                                Visibility="{Binding VisibilityPassResult}" />
                                                            <TextBlock
                                                                x:Name="FailedStatus"
                                                                FontWeight="Bold"
                                                                Foreground="#A00000"
                                                                Text="{Binding DisplayFailedStatusTest}"
                                                                Visibility="{Binding VisibilityFailResult}" />
                                                            <TextBlock
                                                                x:Name="SkippedStatus"
                                                                FontWeight="Bold"
                                                                Foreground="Orange"
                                                                Text="{Binding DisplaySkipStatusTest}"
                                                                Visibility="{Binding VisibilitySkipResult}" />
                                                            <TextBlock
                                                                FontWeight="Bold"
                                                                Text="]"
                                                                Visibility="{Binding VisibilityTestResult}" />
                                                        </StackPanel>
                                                    </Grid>
                                                </Expander.Header>

                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="25" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="740" />
                                                            <ColumnDefinition Width="65" />
                                                            <ColumnDefinition Width="100" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition />
                                                        </Grid.ColumnDefinitions>

                                                        <TextBlock
                                                            Grid.Column="0"
                                                            FontWeight="Bold"
                                                            Text="Test Method Name" />
                                                        <TextBlock
                                                            Grid.Column="1"
                                                            FontWeight="Bold"
                                                            Text="Total" />
                                                        <TextBlock
                                                            Grid.Column="2"
                                                            FontWeight="Bold"
                                                            Text="Done" />
                                                        <TextBlock
                                                            Grid.Column="3"
                                                            HorizontalAlignment="Right"
                                                            FontWeight="Bold"
                                                            Text="Result" />
                                                    </Grid>

                                                    <ItemsControl Grid.Row="1" ItemsSource="{Binding TestMethodsModel}">
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate x:DataType="models:TestMethodModel">
                                                                <Border BorderBrush="{StaticResource ControlStrongFillColorDisabledBrush}" BorderThickness="0,0,0,1">
                                                                    <Grid Background="{Binding IndexTest, Converter={StaticResource AlternatingRowColorConverter}}" Opacity="0.85">

                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="Auto" />
                                                                        </Grid.RowDefinitions>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="50" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="70" />
                                                                            <ColumnDefinition Width="*" />
                                                                        </Grid.ColumnDefinitions>
                                                                        <CheckBox
                                                                            Grid.Column="0"
                                                                            Width="660"
                                                                            Margin="10,0,0,0"
                                                                            Content="{x:Bind TestMethodName}"
                                                                            IsChecked="{x:Bind IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                                            <ToolTipService.ToolTip>
                                                                                <ToolTip Content="{Binding DescriptionAttribute}" Visibility="{Binding DescriptionAttribute, Converter={StaticResource NullToVisibilityConverter}}" />
                                                                            </ToolTipService.ToolTip>
                                                                        </CheckBox>
                                                                        <Button
                                                                            Grid.Column="1"
                                                                            VerticalContentAlignment="Center"
                                                                            Command="{x:Bind ChangeJsonSettingsCommand}"
                                                                            Content="•••"
                                                                            FontSize="12"
                                                                            Visibility="{Binding VisibilitysConfigButton}" />
                                                                        <TextBox
                                                                            Grid.Column="2"
                                                                            VerticalAlignment="Center"
                                                                            Text="{Binding RetryCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                            TextAlignment="Center" />
                                                                        <TextBlock
                                                                            Grid.Column="3"
                                                                            HorizontalAlignment="Center"
                                                                            VerticalAlignment="Center"
                                                                            Text="{Binding CurentCount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                                        <StackPanel Grid.Column="4" Orientation="Horizontal">
                                                                            <Grid
                                                                                Margin="8"
                                                                                HorizontalAlignment="Center"
                                                                                VerticalAlignment="Center">
                                                                                <Grid.RowDefinitions>
                                                                                    <RowDefinition Height="20" />
                                                                                </Grid.RowDefinitions>
                                                                                <Grid.ColumnDefinitions>
                                                                                    <ColumnDefinition Width="80" />
                                                                                    <ColumnDefinition Width="80" />
                                                                                    <ColumnDefinition Width="90" />
                                                                                </Grid.ColumnDefinitions>
                                                                                <TextBlock
                                                                                    Grid.Column="0"
                                                                                    FontWeight="SemiBold"
                                                                                    Foreground="YellowGreen"
                                                                                    Text="{Binding DisplayPassStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                    Visibility="{Binding VisibilityPassStatus}" />

                                                                                <TextBlock
                                                                                    Grid.Column="1"
                                                                                    FontWeight="SemiBold"
                                                                                    Foreground="#A00000"
                                                                                    Text="{Binding DisplayFailedStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                    Visibility="{Binding VisibilityFailStatus}" />

                                                                                <TextBlock
                                                                                    Grid.Column="2"
                                                                                    Margin="0,0,10,0"
                                                                                    FontWeight="SemiBold"
                                                                                    Foreground="Orange"
                                                                                    Text="{Binding DisplaySkipStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                    Visibility="{Binding VisibilitySkipStatus}" />
                                                                            </Grid>
                                                                        </StackPanel>
                                                                    </Grid>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>
                                            </Expander>
                                        </DataTemplate>
                                    </table:TableViewTemplateColumn.CellTemplate>
                                </table:TableViewTemplateColumn>
                            </table:TableView.Columns>
                        </table:TableView>




                    </Grid>
                </Border>

                <Grid
                    Grid.Row="2"
                    Grid.Column="0"
                    VerticalAlignment="Center">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Button
                        Grid.Column="0"
                        Width="100"
                        Height="50"
                        Margin="0,0,15,10"
                        HorizontalAlignment="Right"
                        Command="{Binding GroupExpandedCommand}"
                        Content="Expand"
                        FontWeight="SemiBold" />

                    <Button
                        Grid.Column="1"
                        Width="100"
                        Height="50"
                        Margin="15,0,0,10"
                        HorizontalAlignment="Left"
                        Command="{Binding GroupCollapseCommand}"
                        Content="Collapse"
                        FontWeight="SemiBold" />

                </Grid>

                <Grid
                    Grid.Row="2"
                    Grid.Column="1"
                    VerticalAlignment="Center">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Button
                        Grid.Column="0"
                        Width="100"
                        Height="50"
                        Margin="0,0,15,10"
                        HorizontalAlignment="Right"
                        Command="{Binding RunAutoTestCommand}"
                        Content="Run"
                        FontWeight="SemiBold" />

                    <Button
                        Grid.Column="1"
                        Width="100"
                        Height="50"
                        Margin="15,0,0,10"
                        HorizontalAlignment="Left"
                        Command="{Binding StopAutoTestCommand}"
                        Content="Stop"
                        FontWeight="SemiBold" />

                </Grid>

            </Grid>
        </Border>

    </Grid>
</Page>
